# SWD 플래시 메모리덤프

Created: 2022년 6월 19일 오후 3:34
Tags: hardware

## 1. ST-Link

1-1 구성품

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled.png)

1-2 STM32 20pin Function을 확인함ㄴ 7,8,9번 핀이 각각 SWDIO, GND, SWCLK로 SWD 인터페이스 연결에 필요한 핀인 것을 확인한다.

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%201.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%201.png)

1-3 pin layout을 확인하면 pin 번호의 위치를 확인할 수 있다.

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%202.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%202.png)

1-4 STM32 핀 위치를 확인한다.

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%203.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%203.png)

1-5 보안경비 시스템에서 확인가능한 SWD 인터페이스를 찾고 거기에 각자의 핀에 맞는 곳을 연결하고 납땜한다. ( VCC는 따로 연결이 필요하지 않음 )

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%204.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%204.png)

1-6 STM32 ST-LINK Utility 화면

① SWD 인터페이스 연결

② 메모리 읽을 구간

③ 실제 Read 된 메모리

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%205.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%205.png)

1-7 읽은 메모리를 bin파일로 저장한다. 리눅스 명령어 Strings 명령어를 통해 메모리에 저장되어 있던 주요 AT 명령어 확인이 가능했다.

<aside>
💡 binwalk를 통해 펌웨어 분석을 시도했지만 실패하였고, 별도로 MCU 상에 파일 시스템 및 부트로더 등의 펌웨어가 존재하지 않는 것으로 확인된다.

</aside>

![SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%206.png](SWD%20%E1%84%91%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B5%20%E1%84%86%E1%85%A6%E1%84%86%E1%85%A9%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B3%205e59ac71cca74660a0ced3f03091f81f/Untitled%206.png)