---
layout: post
title:  "IAP Proxy"
tags: GCP
---

## IAP Proxy?

> IAP(identify-Aware-Proxy)의 기본 개념은 HTTPS로 액세스한 애플리케이션에 대한 중앙 승인 레이어를 설정할 수 있으므로 네트워크 수준 방화벽을 사용하지 않고 애플리케이션 수준 액세스 제어 모델을 사용할 수 있습니다.

GCP IAP document guide에서 위와 같이 설명하고 있습니다. 언뜻 네트워크 수준 방화벽을 사용하지 않아도 애플리케이션 수준에서 액세스 제어를 할 수 있다는 말처럼 보이는데요. 
예를 들어 회사에서 중요한 내부 애플리케이션을 개발해서 사용하고 있다고 가정했을 떄, 이 애플리케이션에서는 민감한 데이터와 기능이 포함되어 있어 인가된 사용자만 접근할 수 있어야 합니다.

전통적인 방식으로는 당연히 네트워크 수준에서 방화벽을 사용해 특정 IP 주소 범위에서만 액세스를 허용하는 방식으로 제어하겠죠?
그러나 IAP를 사용한다면 네트워크 수준의 방화벽이 없어도 애플리케이션 수준에서 액세스 제어를 할 수 있는 기능으로 보여집니다.


## 어떤 과정으로 진행될까요?

1. 사용자는 애플리케이션의 URL에 접근 합니다.
2. IAP는 사용자의 인증 상태를 확인합니다. 인증 되지 않은 경우 로그인 페이지로 리다이렉션 됩니다.
3. 사용자는 로그인하면 IAP는 사용자의 ID와 권한을 확인합니다.
4. IAP는 사용자의 ID와 권한을 기반으로 애플리케이션에 대한 액세스 권한을 판단합니다.
5. 액세스가 허용되면 IAP는 사용자의 요청을 애플리케이션으로 전달하고, 애플리케이션은 사용자의 요청을 처리합니다.
6. 액세스가 거부되면 IAP는 사용자에게 액세스 거부 메시지를 표시합니다.



추후 더 작성 예정